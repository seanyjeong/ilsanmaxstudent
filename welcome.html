<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>홈</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #4895ef;
            --secondary: #3f37c9;
            --success: #28a745; /* 완료 색상 변경 */
            --danger: #f72585;
            --warning: #f8961e;
            --dark: #1e1e2e;
            --light: #f8f9fa;
            --gray: #adb5bd;
            --gray-light: #e9ecef;
            --border-radius: 16px;
            --card-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
            --text-secondary: #6c757d; /* 텍스트 보조 색상 추가 */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            color: var(--dark);
            /* 스크롤바 숨기기 (필요시) */
            /* overflow-y: scroll; */
            /* -ms-overflow-style: none; */ /* IE and Edge */
            /* scrollbar-width: none; */ /* Firefox */
        }
        /* body::-webkit-scrollbar { display: none; } */ /* Chrome, Safari, Opera */


        .container {
            max-width: 500px;
            margin: 0 auto;
        }

        .card {
            background-color: #ffffff;
            border-radius: var(--border-radius);
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--card-shadow);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 28px rgba(0, 0, 0, 0.12);
        }

        /* ⭐️ 1. 헤더 (로고 + 웰컴 메시지) */
        .welcome-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: var(--border-radius);
            padding: 20px;
            color: white;
            box-shadow: var(--card-shadow);
        }

        /* ⭐️ 2. 지점 로고 */
        #branchLogo {
            width: 100px;
            height: 100px;
            background-color: rgb(255, 255, 255);
            border-radius: 50%;

            justify-content: center;
            font-size: 12px;
            
           
            
            flex-shrink: 0;
            object-fit: fill; /* 이미지 비율 유지 */
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        /* 이미지 로딩 실패 시 대비용 텍스트 로고 스타일 (JS에서 사용) */
        #branchLogoTextDiv {
             width: 60px;
             height: 60px;
             background-color: rgba(255, 255, 255, 0.2);
             border-radius: 50%;
             display: flex;
             align-items: center;
             justify-content: center;
             font-size: 14px; /* 글씨 크기 살짝 키움 */
             font-weight: bold;
             color: white;
             text-align: center;
             flex-shrink: 0;
             border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .welcome-text {
            flex-grow: 1;
            padding-left: 15px;
        }

        .welcome-text h2 {
            font-size: 22px;
            font-weight: 700;
            margin: 0 0 5px 0;
            color: white;
        }

        .welcome-text p {
            font-size: 15px;
            color: rgba(255, 255, 255, 0.8);
            margin: 0;
        }

        /* 카드 공통 타이틀 */
        .card h3 {
            font-size: 18px;
            font-weight: 700;
            margin-top: 0;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--gray-light);
            display: flex;
            align-items: center;
        }

        .card h3 i {
            margin-right: 8px;
            color: var(--primary);
        }

        /* --- ⭐️ 오늘의 필수 운동 리스트 --- */
        .assignment-list {
            list-style: none; padding-left: 0; margin: 0;
        }
        .assignment-item {
            display: flex; align-items: flex-start; /* 체크박스와 내용 상단 정렬 */
            padding: 12px 5px; border-bottom: 1px solid var(--gray-light);
            transition: background-color 0.2s;
        }
        .assignment-item:last-child { border-bottom: none; }
        .assignment-item input[type="checkbox"] {
            width: 20px; height: 20px; margin-right: 15px; flex-shrink: 0;
            cursor: pointer; accent-color: var(--success);
            margin-top: 2px; /* 내용과 높이 맞추기 */
        }
        .assignment-details { flex-grow: 1; font-size: 15px; }
        .assignment-details .exercise-name { font-weight: 600; display: block; margin-bottom: 3px; }
        .assignment-details .target-info { font-size: 0.9em; color: var(--text-secondary); display: block; margin-bottom: 4px; } /* 줄바꿈 및 간격 */
        .assignment-details .teacher-name { font-size: 0.8em; color: var(--gray); font-style: italic; }

        /* 완료된 항목 스타일 */
        .assignment-item.completed { background-color: #f0fff4; /* 옅은 초록 배경 */ }
        .assignment-item.completed .assignment-details { text-decoration: line-through; color: var(--gray); }
        .assignment-item.completed .exercise-name { color: var(--success); text-decoration: none; } /* 완료 시 운동명 색상 변경, 밑줄 제거 */
        .assignment-item.completed .target-info { text-decoration: none; } /* 밑줄 제거 */
        .assignment-item.completed .teacher-name { text-decoration: none; } /* 밑줄 제거 */


        .loading, .no-data { text-align: center; padding: 15px; color: var(--text-secondary); font-size: 14px;}
        /* --- ⭐️ 오늘의 필수 운동 끝 --- */


        /* 학원 공지 (링크 -> 버튼 역할) */
        .notice-list button.notice-link { /* <a> 태그 대신 <button> 사용 */
            display: block; /* 한 줄 전체 차지 */
            width: 100%; /* 너비 꽉 채움 */
            padding: 10px 5px;
            text-decoration: none;
            color: var(--dark);
            border: none; /* 버튼 테두리 제거 */
            background: none; /* 버튼 배경 제거 */
            text-align: left; /* 텍스트 왼쪽 정렬 */
            border-bottom: 1px solid var(--gray-light);
            transition: var(--transition);
            cursor: pointer; /* 마우스 포인터 변경 */
        }
        .notice-list button.notice-link:last-child { border-bottom: none; }
        .notice-list button.notice-link:hover { background-color: rgba(67, 97, 238, 0.05); border-radius: 8px; padding-left: 10px; }
        .notice-title {
            font-size: 15px;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis; /* 제목 길면 ... 처리 */
            display: block; /* span 기본 inline 속성 변경 */
            margin-bottom: 3px; /* 제목 아래 간격 */
            pointer-events: none; /* 버튼 내 텍스트 클릭 방지 */
        }
        .notice-author {
            font-size: 0.8em;
            color: var(--gray);
            font-style: italic;
            display: block; /* span 기본 inline 속성 변경 */
            pointer-events: none; /* 버튼 내 텍스트 클릭 방지 */
        }


        /* 빠른 액션 버튼 */
        .quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 20px;
        }
        .action-btn {
            background: white; border: none; border-radius: 12px; padding: 15px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); transition: var(--transition);
            cursor: pointer; text-decoration: none; color: var(--dark);
        }
        .action-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1); }
        .action-btn i { font-size: 24px; margin-bottom: 8px; color: var(--primary); }
        .action-btn span { font-size: 13px; font-weight: 600; }

        /* --- ⭐️ Toast Popup --- */
        .toast-popup {
            position: fixed; bottom: 85px; /* ⭐ 하단 네비게이션 위로 조정 */
            left: 50%; transform: translateX(-50%);
            background-color: rgba(0,0,0,0.85); color: white; padding: 12px 20px; border-radius: 25px;
            font-size: 14px; z-index: 1001; opacity: 0;
            transition: opacity 0.4s ease, bottom 0.4s ease; white-space: nowrap;
        }
        .toast-popup.show { opacity: 1; bottom: 105px; /* ⭐ 하단 네비게이션 위로 조정 */ }
        .toast-popup.success { background-color: rgba(40, 167, 69, 0.9); }
        .toast-popup.error { background-color: rgba(220, 38, 38, 0.9); }

        /* --- ⭐️ 모달 스타일 --- */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.6); z-index: 1000;
            display: none; justify-content: center; align-items: center;
            opacity: 0; transition: opacity 0.3s ease; padding: 15px;
        }
        .modal-overlay.show { display: flex; opacity: 1; }
        .modal-content {
            background-color: #fff; border-radius: var(--border-radius);
            width: 100%; max-width: 500px; max-height: 85vh; /* 높이 제한 추가 */
            display: flex; flex-direction: column;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            transform: scale(0.95); transition: transform 0.3s ease;
        }
        .modal-overlay.show .modal-content { transform: scale(1); }
        .modal-header {
            padding: 15px 20px; border-bottom: 1px solid var(--gray-light);
            display: flex; justify-content: space-between; align-items: center;
            flex-shrink: 0; /* 헤더 크기 고정 */
        }
        .modal-header h3 { margin: 0; font-size: 1.1rem; color: var(--primary); font-weight: 700; }
        .modal-header .close-btn { background: none; border: none; font-size: 24px; color: var(--gray); cursor: pointer; padding: 0 5px; }
        .modal-body {
            padding: 20px; overflow-y: auto; /* 내용 길면 스크롤 */
            line-height: 1.6;
        }
        .notice-meta {
            font-size: 0.85rem; color: var(--text-secondary); margin-bottom: 15px;
        }
        .notice-content-area {
             white-space: pre-wrap; /* 줄바꿈 및 공백 유지 */
             word-break: break-word; /* 긴 단어 줄바꿈 */
             font-size: 0.95rem;
        }
        hr { border: none; border-top: 1px solid var(--gray-light); margin: 15px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="welcome-header">
            <img id="branchLogo" src="https://github.com/seanyjeong/ilsanmaxstudent/blob/main/ilsanmax.png?raw=true" alt="지점 로고">

<div class="welcome-text">
            <h2><span id="studentName">학생</span>님, 오늘도 반갑습니다.</h2>
            <p>JUST ILSAN-MAX</p>
            </div>
        </div>

        <div class="card">
            <h3><i class="fa-solid fa-calendar-check" style="color:var(--warning)"></i> IMAX 일일퀘스트</h3>
            <ul class="assignment-list" id="assignmentList">
                <p class="loading" id="assignmentLoading"><i class="fas fa-spinner fa-spin"></i> 일퀘 불러오는 중...</p>
            </ul>
        </div>

        <div class="card">
            <h3><i class="fa-solid fa-bullhorn" style="color:var(--info)"></i> IMAX 공지사항</h3>
            <div class="notice-list" id="noticeList">
                <p class="loading" id="noticeLoading"><i class="fas fa-spinner fa-spin"></i> 공지사항 불러오는 중...</p>
                </div>
        </div>

        <div class="quick-actions">
            <a href="practical.html" class="action-btn" target="_self">
                <i class="fa-solid fa-chart-line"></i>
                <span>훈련일지</span>
            </a>
            <a href="search.html" class="action-btn" target="_self">
                <i class="fa-solid fa-graduation-cap"></i>
                <span>대학검색</span>
            </a>
        </div>
    </div>

    <div class="modal-overlay" id="noticeModalOverlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalNoticeTitle">공지 제목</h3>
                <button class="close-btn" onclick="closeNoticeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="notice-meta">
                    <span id="modalNoticeAuthor">작성자: 아무개</span> |
                    <span id="modalNoticeDate">작성일: YYYY-MM-DD</span>
                </div>
                <hr>
                <div id="modalNoticeContent" class="notice-content-area">
                    공지 내용이 여기에 표시됩니다...
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- 0. 설정 ---
        const JUNGSI_SVR = 'https://supermax.kr';
        const token = localStorage.getItem('jwt_token');

        // --- 1. DOM 요소 ---
        const studentNameEl = document.getElementById('studentName');
        const branchLogoEl = document.getElementById('branchLogo'); // 이미지 요소
        const branchNameEl = document.getElementById('branchName');
        const assignmentListEl = document.getElementById('assignmentList');
        const assignmentLoadingEl = document.getElementById('assignmentLoading');
        const noticeListEl = document.getElementById('noticeList');
        const noticeLoadingEl = document.getElementById('noticeLoading');
        // 모달 요소 추가
        const noticeModalOverlay = document.getElementById('noticeModalOverlay');
        const modalNoticeTitle = document.getElementById('modalNoticeTitle');
        const modalNoticeAuthor = document.getElementById('modalNoticeAuthor');
        const modalNoticeDate = document.getElementById('modalNoticeDate');
        const modalNoticeContent = document.getElementById('modalNoticeContent');

        // ⭐️ 공지사항 데이터 저장용 전역 변수
        let allNoticesMap = {};

        // --- 2. 헬퍼 함수 ---
        function showToast(message, isSuccess = true) {
            const t = document.createElement('div'); t.textContent = message;
            t.className = `toast-popup ${isSuccess ? 'success' : 'error'}`;
            document.body.appendChild(t); setTimeout(() => { t.classList.add('show'); }, 10);
            setTimeout(() => { t.classList.remove('show'); setTimeout(() => { if (document.body.contains(t)) document.body.removeChild(t); }, 500); }, 2500);
        }

        // --- 3. 데이터 로딩 및 렌더링 함수 ---

        // 오늘 할당된 운동 목록 API 호출 및 화면 렌더링 (선생님 이름 포함됨)
        async function loadAssignments() {
            if (!token) return;
            try {
                assignmentLoadingEl.style.display = 'block';
                assignmentListEl.innerHTML = '';
                assignmentListEl.appendChild(assignmentLoadingEl);
                const res = await fetch(`${JUNGSI_SVR}/jungsi/student/today-assignment`, {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                const data = await res.json();
                if (!res.ok) throw new Error(`[${res.status}] ${data.message || '운동 목록 로드 실패'}`);
                if (!data.success) throw new Error(data.message || '운동 목록 로드 실패 (Success: false)');
                assignmentLoadingEl.style.display = 'none';
                const assignments = data.assignments || [];
                if (assignments.length === 0) {
                    assignmentListEl.innerHTML = '<p class="no-data">오늘 할당된 운동이 없습니다.</p>';
                    return;
                }
                assignments.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'assignment-item';
                    if (item.is_completed) { li.classList.add('completed'); }
                    li.dataset.assignmentId = item.assignment_id;

                    let targetInfo = '';
                    if (item.category === 'Weight') { targetInfo = `${item.target_weight || '-'}kg ${item.target_sets || '-'}x${item.target_reps || '-'}`; }
                    else if (item.target_notes) { targetInfo = item.target_notes; }
                    else if (item.target_sets || item.target_reps) { targetInfo = `${item.target_sets || ''}세트 ${item.target_reps || ''}회`; }

                    const teacherDisplay = item.teacher_name ? `${item.teacher_name} 선생님` : (item.teacher_userid || '담당자');

                    li.innerHTML = `
                        <input type="checkbox" ${item.is_completed ? 'checked' : ''} onchange="updateAssignmentStatus(this, ${item.assignment_id})">
                        <div class="assignment-details">
                            <span class="exercise-name">${item.exercise_name || '운동명 없음'}</span>
                            <span class="target-info">${targetInfo || '세부 정보 없음'}</span>
                            <span class="teacher-name">할당: ${teacherDisplay}</span>
                        </div>
                    `;
                    assignmentListEl.appendChild(li);
                });
            } catch (err) {
                console.error("오늘 운동 목록 로딩 실패:", err);
                assignmentLoadingEl.style.display = 'none';
                assignmentListEl.innerHTML = `<p class="no-data status-error">운동 목록 로드 중 오류 발생</p>`;
            }
        }

        // 공지사항 목록 API 호출 및 화면 렌더링 (버튼 생성 및 모달 연결)
        async function loadNotices() {
            if (!token) return;
            try {
                noticeLoadingEl.style.display = 'block';
                noticeListEl.innerHTML = '';
                noticeListEl.appendChild(noticeLoadingEl);
                allNoticesMap = {}; // 맵 초기화

                const res = await fetch(`${JUNGSI_SVR}/jungsi/student/announcements`, {
                    headers: { 'Authorization': 'Bearer ' + token }
                });
                const data = await res.json();
                if (!res.ok) throw new Error(`[${res.status}] ${data.message || '공지 로드 실패'}`);
                if (!data.success) throw new Error(data.message || '공지 로드 실패 (Success: false)');
                noticeLoadingEl.style.display = 'none';
                const notices = data.announcements || [];
                if (notices.length === 0) {
                    noticeListEl.innerHTML = '<p class="no-data">등록된 공지사항이 없습니다.</p>';
                    return;
                }
                // 전체 공지 데이터 저장
                notices.forEach(notice => {
                    allNoticesMap[notice.notice_id] = notice;
                });

                // 최신 3개만 리스트에 버튼으로 표시
                notices.slice(0, 3).forEach(notice => {
                    const button = document.createElement('button'); // <a> 대신 <button>
                    button.className = 'notice-link'; // 스타일 클래스
                    button.onclick = () => openNoticeModal(notice.notice_id); // 클릭 시 모달 열기

                    let authorDisplay = '관리자';
                    if (notice.author_name) {
                        authorDisplay = `${notice.author_name} 선생님`;
                    } else if (notice.created_by) {
                         authorDisplay = notice.created_by === 'sean8320' ? '원장님' : `${notice.created_by}`;
                    }

                    button.innerHTML = `
                        <span class="notice-title">${notice.title || '제목 없음'}</span>
                        <span class="notice-author">작성자: ${authorDisplay}</span>
                    `;
                    noticeListEl.appendChild(button);
                });
            } catch (err) {
                 console.error("공지사항 로딩 실패:", err);
                 noticeLoadingEl.style.display = 'none';
                 noticeListEl.innerHTML = `<p class="no-data status-error">공지 로드 중 오류 발생</p>`;
            }
        }

        // 운동 완료 상태 업데이트 API 호출 (변경 없음)
        async function updateAssignmentStatus(checkboxElement, assignmentId) {
            // ... (기존 코드와 동일) ...
             if (!token) return;
            const isCompleted = checkboxElement.checked;
            const listItem = checkboxElement.closest('.assignment-item');
            listItem.classList.toggle('completed', isCompleted);
            checkboxElement.disabled = true;
            try {
                const res = await fetch(`${JUNGSI_SVR}/jungsi/student/assignment/complete`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + token },
                    body: JSON.stringify({ assignment_id: assignmentId, is_completed: isCompleted })
                });
                const data = await res.json();
                if (!res.ok) throw new Error(`[${res.status}] ${data.message || '상태 업데이트 실패'}`);
                if (!data.success) throw new Error(data.message || '상태 업데이트 실패 (Success: false)');
            } catch (err) {
                console.error("운동 완료 상태 업데이트 실패:", err);
                showToast(`❌ 상태 업데이트 오류: ${err.message}`, false);
                checkboxElement.checked = !isCompleted;
                listItem.classList.toggle('completed', !isCompleted);
            } finally {
                checkboxElement.disabled = false;
            }
        }
        window.updateAssignmentStatus = updateAssignmentStatus; // 전역 노출

        // --- ⭐️ 공지사항 모달 관련 함수 ---
        function openNoticeModal(noticeId) {
            const notice = allNoticesMap[noticeId];
            if (!notice) {
                showToast('공지 정보를 찾을 수 없습니다.', false);
                return;
            }

            modalNoticeTitle.textContent = notice.title || '제목 없음';

            let authorDisplay = '관리자';
            if (notice.author_name) {
                authorDisplay = `${notice.author_name} 선생님`;
            } else if (notice.created_by) {
                authorDisplay = notice.created_by === 'sean8320' ? '원장님' : `${notice.created_by}`;
            }
            modalNoticeAuthor.textContent = `작성자: ${authorDisplay}`;

            try {
                 modalNoticeDate.textContent = `작성일: ${new Date(notice.created_at).toISOString().split('T')[0]}`;
            } catch {
                 modalNoticeDate.textContent = '작성일: 알 수 없음';
            }

            modalNoticeContent.textContent = notice.content || '(내용 없음)';

            noticeModalOverlay.classList.add('show');
        }
        window.openNoticeModal = openNoticeModal; // 전역 함수로 노출

        function closeNoticeModal() {
            noticeModalOverlay.classList.remove('show');
        }
        window.closeNoticeModal = closeNoticeModal; // 전역 함수로 노출

        // 모달 오버레이 클릭 시 닫기
        noticeModalOverlay.addEventListener('click', (event) => {
            if (event.target === noticeModalOverlay) {
                closeNoticeModal();
            }
        });
        // --- ⭐️ 공지사항 모달 관련 함수 끝 ---

        // --- 4. 페이지 로드 시 실행 ---
        document.addEventListener('DOMContentLoaded', () => {
            if (token) {
                try {
                    const base64Url = token.split('.')[1];
                    const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
                    const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                    }).join(''));
                    const payload = JSON.parse(jsonPayload);

                    studentNameEl.textContent = payload.name || '학생';
                    
                    // ▼▼▼ [수정] 로고 설정 로직 ▼▼▼
                    const logoImg = document.getElementById('branchLogo');

                    // 이미지 로딩 실패 시 처리
                    logoImg.onerror = () => {
                        console.warn('로고 이미지 로딩 실패. 텍스트 로고를 표시합니다.');
                        // 이미지 대신 텍스트를 표시할 div 생성
                        const tempTextLogo = document.createElement('div');
                        tempTextLogo.id = 'branchLogoTextDiv'; // 스타일 적용용 id
                        tempTextLogo.textContent = payload.branch ? payload.branch.substring(0, 3).toUpperCase() : 'MAX';
                        // 이미지 요소를 텍스트 div로 교체
                        logoImg.parentNode.replaceChild(tempTextLogo, logoImg);
                    };
                    // src가 이미 HTML에 있으므로, 만약 로딩 실패 시 onerror가 실행됨
                    // ▲▲▲ [수정] 로고 설정 로직 ▲▲▲

                } catch (error) {
                    console.error("토큰 디코딩 오류:", error);
                    studentNameEl.textContent = '학생';
                    
                    // 에러 시에도 텍스트 로고 표시
                    const logoImg = document.getElementById('branchLogo');
                    const tempTextLogo = document.createElement('div');
                    tempTextLogo.id = 'branchLogoTextDiv';
                    tempTextLogo.textContent = 'MAX';
                    if(logoImg) logoImg.parentNode.replaceChild(tempTextLogo, logoImg);
                }
            } else {
                 console.warn("로그인 토큰을 찾을 수 없습니다.");
                 studentNameEl.textContent = '방문자';
                 
                 // 로그인 안됐을 때 텍스트 로고 표시
                 const logoImg = document.getElementById('branchLogo');
                 const tempTextLogo = document.createElement('div');
                 tempTextLogo.id = 'branchLogoTextDiv';
                 tempTextLogo.textContent = 'ERR';
                 if(logoImg) logoImg.parentNode.replaceChild(tempTextLogo, logoImg);

                 assignmentLoadingEl.style.display = 'none';
                 assignmentListEl.innerHTML = '<p class="no-data">로그인 후 이용 가능합니다.</p>';
                 noticeLoadingEl.style.display = 'none';
                 noticeListEl.innerHTML = '<p class="no-data">로그인 후 이용 가능합니다.</p>';
                 return;
            }

            // 데이터 로드 시작
            loadAssignments();
            loadNotices();
        });

    </script>
</body>
</html>
